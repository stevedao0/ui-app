{% extends "base.html" %}
{% block content %}
<div style="max-width: 800px; margin: 0 auto;">
  <div class="fade-in" style="margin-bottom: var(--space-6);">
    <div style="display: flex; align-items: center; gap: var(--space-3); margin-bottom: var(--space-3);">
      <a href="/" style="display: flex; align-items: center; gap: var(--space-2); color: var(--text-secondary); text-decoration: none; transition: all var(--transition-base);" onmouseover="this.style.color='var(--primary-600)'" onmouseout="this.style.color='var(--text-secondary)'">
        <svg style="width: 20px; height: 20px;" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
        </svg>
        Về trang chủ
      </a>
    </div>
  </div>

  <div class="card card-enhanced hover-lift">
    <div class="card-header" style="background: linear-gradient(135deg, #FFFFFF 0%, #FEF3C7 50%, #FDE68A 100%); border-left: 4px solid var(--warning-600); border-bottom: 2px solid var(--warning-200);">
      <h1 class="card-title" style="display: flex; align-items: center; gap: var(--space-3); background: linear-gradient(135deg, var(--warning-700), var(--warning-600)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">
        <svg style="width: 32px; height: 32px; color: var(--warning-600);" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z" />
        </svg>
        Đổi mật khẩu
      </h1>
      <div style="display: flex; align-items: center; gap: var(--space-4); margin-top: var(--space-3); padding: var(--space-3); background: rgba(255, 255, 255, 0.8); border-radius: var(--radius-md); border: 1px solid var(--warning-200);">
        <div style="display: flex; align-items: center; gap: var(--space-2);">
          <svg style="width: 18px; height: 18px; color: var(--primary-600);" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
          </svg>
          <span style="color: var(--text-secondary); font-size: var(--text-sm);">Tài khoản:</span>
          <strong style="color: var(--text-primary);">{{ username }}</strong>
        </div>
        {% if role == 'admin' %}
        <span class="badge badge-red">
          <svg style="width: 14px; height: 14px;" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" />
          </svg>
          {{ role }}
        </span>
        {% elif role == 'moderator' %}
        <span class="badge badge-orange">
          <svg style="width: 14px; height: 14px;" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z" />
          </svg>
          {{ role }}
        </span>
        {% else %}
        <span class="badge badge-blue">
          <svg style="width: 14px; height: 14px;" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
          </svg>
          {{ role }}
        </span>
        {% endif %}
      </div>
    </div>

    <div class="card-body" style="padding: var(--space-8);">
      {% if error %}
        <div class="alert alert-error slide-down" style="margin-bottom: var(--space-6); animation: shake 0.5s;">
          <svg class="alert-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
          </svg>
          <div class="alert-content">
            <div class="alert-message">{{ error }}</div>
          </div>
        </div>
      {% endif %}

      {% if message %}
        <div class="alert alert-success slide-down" style="margin-bottom: var(--space-6); animation: pulse 1s;">
          <svg class="alert-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
          </svg>
          <div class="alert-content">
            <div class="alert-message">{{ message }}</div>
          </div>
        </div>
      {% endif %}

      <div style="background: linear-gradient(135deg, var(--info-50) 0%, var(--primary-50) 100%); padding: var(--space-6); border-radius: var(--radius-lg); border: 2px dashed var(--info-300); margin-bottom: var(--space-6);">
        <h3 style="font-size: var(--text-lg); font-weight: var(--font-semibold); color: var(--info-800); margin-bottom: var(--space-4); display: flex; align-items: center; gap: var(--space-2);">
          <svg style="width: 24px; height: 24px; color: var(--info-600);" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" />
          </svg>
          Yêu cầu mật khẩu mạnh
        </h3>
        <ul style="list-style: none; padding: 0; margin: 0;">
          <li style="padding: var(--space-2) 0; display: flex; align-items: center; gap: var(--space-3);">
            <svg style="width: 16px; height: 16px; color: var(--success-600);" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
            <span style="color: var(--text-primary); font-size: var(--text-sm);">Tối thiểu 6 ký tự</span>
          </li>
          <li style="padding: var(--space-2) 0; display: flex; align-items: center; gap: var(--space-3);">
            <svg style="width: 16px; height: 16px; color: var(--success-600);" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
            <span style="color: var(--text-primary); font-size: var(--text-sm);">Nên kết hợp chữ hoa, chữ thường, số và ký tự đặc biệt</span>
          </li>
          <li style="padding: var(--space-2) 0; display: flex; align-items: center; gap: var(--space-3);">
            <svg style="width: 16px; height: 16px; color: var(--success-600);" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
            <span style="color: var(--text-primary); font-size: var(--text-sm);">Tránh sử dụng thông tin cá nhân dễ đoán</span>
          </li>
        </ul>
      </div>

      <form method="post" action="/account/password" data-loading>
        <div class="form-group" style="margin-bottom: var(--space-6);">
          <label class="form-label" style="display: flex; align-items: center; gap: var(--space-2); font-size: var(--text-base); font-weight: var(--font-semibold); color: var(--text-primary); margin-bottom: var(--space-3);">
            <svg style="width: 20px; height: 20px; color: var(--warning-600);" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" />
            </svg>
            Mật khẩu hiện tại <span style="color: var(--error-600);">*</span>
          </label>
          <input class="form-input" type="password" name="old_password" required style="padding: var(--space-4); border: 2px solid var(--border-default); border-radius: var(--radius-lg); transition: all var(--transition-base);" onfocus="this.style.borderColor='var(--warning-600)'; this.style.background='var(--warning-50)';" onblur="this.style.borderColor='var(--border-default)'; this.style.background='white';" placeholder="Nhập mật khẩu hiện tại" />
        </div>

        <div style="display: grid; gap: var(--space-6); grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); margin-bottom: var(--space-6);">
          <div class="form-group">
            <label class="form-label" style="display: flex; align-items: center; gap: var(--space-2); font-size: var(--text-base); font-weight: var(--font-semibold); color: var(--text-primary); margin-bottom: var(--space-3);">
              <svg style="width: 20px; height: 20px; color: var(--success-600);" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z" />
              </svg>
              Mật khẩu mới <span style="color: var(--error-600);">*</span>
            </label>
            <input class="form-input" type="password" name="new_password" minlength="6" required style="padding: var(--space-4); border: 2px solid var(--border-default); border-radius: var(--radius-lg); transition: all var(--transition-base);" onfocus="this.style.borderColor='var(--success-600)'; this.style.background='var(--success-50)';" onblur="this.style.borderColor='var(--border-default)'; this.style.background='white';" placeholder="Nhập mật khẩu mới (tối thiểu 6 ký tự)" />
          </div>
          <div class="form-group">
            <label class="form-label" style="display: flex; align-items: center; gap: var(--space-2); font-size: var(--text-base); font-weight: var(--font-semibold); color: var(--text-primary); margin-bottom: var(--space-3);">
              <svg style="width: 20px; height: 20px; color: var(--info-600);" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" />
              </svg>
              Xác nhận mật khẩu mới <span style="color: var(--error-600);">*</span>
            </label>
            <input class="form-input" type="password" name="confirm_password" minlength="6" required style="padding: var(--space-4); border: 2px solid var(--border-default); border-radius: var(--radius-lg); transition: all var(--transition-base);" onfocus="this.style.borderColor='var(--info-600)'; this.style.background='var(--info-50)';" onblur="this.style.borderColor='var(--border-default)'; this.style.background='white';" placeholder="Nhập lại mật khẩu mới" />
          </div>
        </div>

        <div style="display:flex; gap: var(--space-4); flex-wrap: wrap; padding-top: var(--space-4); border-top: 2px solid var(--border-light);">
          <button class="btn btn-primary" type="submit" style="flex: 1; min-width: 200px; font-size: var(--text-base); padding: var(--space-4) var(--space-6); display: flex; align-items: center; justify-content: center; gap: var(--space-2);">
            <svg style="width: 20px; height: 20px;" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
            </svg>
            Lưu mật khẩu mới
          </button>
          <a class="btn btn-secondary" href="/" style="flex: 1; min-width: 200px; font-size: var(--text-base); padding: var(--space-4) var(--space-6); display: flex; align-items: center; justify-content: center; gap: var(--space-2); text-decoration: none;">
            <svg style="width: 20px; height: 20px;" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
            </svg>
            Hủy bỏ
          </a>
        </div>
      </form>
    </div>
  </div>
</div>
{% endblock %}
